{"ast":null,"code":"var _jsxFileName = \"/Users/MattAguiluz/sei-bromeliad/projects/Project4_neon-pyramid/the-neon-pyramid-frontend/the-neon-pyramid-frontend/neon-pyramid/src/App.js\";\nimport './App.css';\nimport React, { Component } from 'react';\nimport Register from './components/Register';\nimport Login from './components/Login';\nimport Logo from './components/Logo';\nimport Nav from './components/Nav';\nimport Menu from './components/Menu'; // import Dish from './components/Dish';\n\nimport Order from './components/Order'; // import Payment from './components/Payment';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet baseUrl = process.env.REACT_APP_BASEURL;\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.register = async e => {\n      e.preventDefault();\n\n      try {\n        const response = await fetch(baseUrl + '/users/register', {\n          method: 'POST',\n          body: JSON.stringify({\n            email: e.target.email.value,\n            username: e.target.username.value,\n            password: e.target.password.value,\n            phone_num: e.target.phone_num.value,\n            address: e.target.address.value,\n            cc_num: '',\n            cc_exp: '',\n            cc_sec_code: '' // cc_num: e.target.cc_num.value,\n            // cc_exp: e.target.cc_exp.value,\n            // cc_sec_code: e.target.cc_sec_code.value,\n\n          }),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n\n        if (response.status === 200) {\n          this.getDishes(); // this.getOrders()\n        }\n      } catch (err) {\n        console.log('Error => ', err);\n        console.log('ðŸ˜– register failed ðŸ˜–');\n      }\n    };\n\n    this.loginUser = async e => {\n      e.preventDefault();\n      const loginBody = {\n        username: e.target.username.value,\n        password: e.target.password.value\n      };\n\n      try {\n        const response = await fetch(baseUrl + '/users/login', {\n          method: 'POST',\n          body: JSON.stringify(loginBody),\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          credentials: 'include'\n        });\n        console.log(response);\n        console.log('BODY: ', response.body);\n\n        if (response.status === 200) {\n          this.getDishes(); // this.getOrders()\n\n          console.log('ðŸ¥³ login successful! ðŸ¥³');\n          this.setState({\n            // need to populate the rest of state for users\n            username: e.target.username.value,\n            password: e.target.password.value,\n            userLoggedIn: true,\n            loginOpen: false\n          });\n          this.newOrder();\n          console.log('current order: ' + JSON.stringify(this.state.currentOrder.data));\n          console.log('current order id: ' + JSON.stringify(this.state.currentOrder.data.id));\n        }\n      } catch (err) {\n        console.log('Error => ', err);\n        console.log('ðŸ˜– login failed ðŸ˜–');\n      }\n    };\n\n    this.logoutUser = () => {\n      console.log('hit logout button');\n      fetch(baseUrl + '/users/logout', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      }).then(res => {\n        console.log(res.status);\n        console.log('ðŸ§¨ logout successful! ðŸ§¨');\n        this.setState({\n          userLoggedIn: false,\n          orderOpen: false\n        });\n      });\n      console.log(this.state);\n    };\n\n    this.getDishes = () => {\n      console.log('hit getDishes');\n      fetch(baseUrl + '/dishes/', {\n        credentials: 'include'\n      }).then(res => {\n        if (res.status === 200) {\n          console.log('ðŸ¥¡ fetch index dishes successful! ðŸ¥¡');\n          return res.json();\n        } else {\n          console.log('fetch index dishes failed...ðŸ’£');\n          return [];\n        }\n      }).then(data => {\n        console.log('data: ' + data.data);\n        this.setState({\n          dishes: data.data\n        });\n        console.log('new data: ' + data.data);\n      });\n    };\n\n    this.newOrder = async () => {\n      console.log('hit newOrder');\n\n      try {\n        const response = await fetch(baseUrl + '/orders/', {\n          method: 'POST',\n          body: JSON.stringify({\n            total: 0.0\n          }),\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          credentials: 'include'\n        });\n        console.log(response.status);\n\n        if (response.status === 201) {\n          console.log('new order created!');\n          const newOrder = await response.json();\n          console.log('new order :' + newOrder);\n          const copyOrders = [...this.state.orders];\n          copyOrders.push(newOrder);\n          this.setState({\n            orders: copyOrders,\n            currentOrder: newOrder,\n            orderOpen: true\n          });\n          console.log('newOrder: ' + JSON.stringify(newOrder));\n          console.log('newOrderID: ' + JSON.stringify(newOrder.data.id));\n          console.log('currentOrder: ' + JSON.stringify(this.state.currentOrder));\n        }\n      } catch (err) {\n        console.log('Error -> ', err);\n        console.log('order not created...');\n      }\n    };\n\n    this.addDishToOrder = (dish_id, order_id) => {\n      console.log('dish id: ' + dish_id, 'order id :' + order_id); // if(this.currentOrderId === undefined){\n      //   this.newOrder()\n      //   console.log('order created: ' + this.state.currentOrder)\n      // } else {\n\n      console.log('existing order: ' + JSON.stringify(this.state.currentOrder)); // }\n\n      const copyOrders = [...this.state.orders];\n      const dishToAdd = this.state.dishes.find(dish => dish.dish_id === dish_id);\n      console.log('dish to add: ' + JSON.stringify(dishToAdd));\n      copyOrders.push(dishToAdd);\n      this.setState({\n        orders: copyOrders,\n        currentOrder: copyOrders[copyOrders.length - 1]\n      });\n      console.log('current order: ' + this.state.currentOrder);\n    };\n\n    this.toggleRegisterForm = () => {\n      this.setState({\n        registerOpen: !this.state.registerOpen\n      }, () => console.log('registerOpen after set state: ' + this.state.registerOpen));\n      console.log('toggleRegisterForm clicked');\n    };\n\n    this.toggleLoginForm = () => {\n      this.setState({\n        loginOpen: !this.state.loginOpen\n      }, () => console.log('loginOpen after set state: ' + this.state.loginOpen));\n      console.log('toggleLoginForm clicked');\n    };\n\n    this.toggleOrderForm = () => {\n      this.setState({\n        orderOpen: !this.state.orderOpen\n      }, () => console.log('orderOpen after set state: ' + this.state.orderOpen));\n      console.log('toggleOrderForm clicked');\n    };\n\n    this.state = {\n      username: '',\n      password: '',\n      email: '',\n      phone_num: '',\n      address: '',\n      payment_info: {},\n      userLoggedIn: false,\n      registerOpen: false,\n      loginOpen: false,\n      orderOpen: false,\n      paymentOpen: false,\n      orders: [],\n      dishes: [],\n      currentOrder: []\n    };\n  }\n\n  componentDidMount() {\n    this.getDishes();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Nav, {\n        toggleRegisterForm: this.toggleRegisterForm,\n        registerOpen: this.state.registerOpen,\n        toggleLoginForm: this.toggleLoginForm,\n        loginOpen: this.state.loginOpen,\n        toggleOrderForm: this.toggleOrderForm,\n        orderOpen: this.state.orderOpen,\n        logoutUser: this.logoutUser,\n        userLoggedIn: this.state.userLoggedIn\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Logo, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Register, {\n        register: this.register,\n        registerOpen: this.state.registerOpen\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Login, {\n        loginUser: this.loginUser,\n        loginOpen: this.state.loginOpen\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bottom-container\",\n        children: [/*#__PURE__*/_jsxDEV(Menu, {\n          dishes: this.state.dishes,\n          newOrder: this.newOrder,\n          addDishToOrder: this.addDishToOrder\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Order, {\n          orderOpen: this.state.orderOpen,\n          currentOrder: this.state.currentOrder\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/MattAguiluz/sei-bromeliad/projects/Project4_neon-pyramid/the-neon-pyramid-frontend/the-neon-pyramid-frontend/neon-pyramid/src/App.js"],"names":["React","Component","Register","Login","Logo","Nav","Menu","Order","baseUrl","process","env","REACT_APP_BASEURL","App","constructor","register","e","preventDefault","response","fetch","method","body","JSON","stringify","email","target","value","username","password","phone_num","address","cc_num","cc_exp","cc_sec_code","headers","status","getDishes","err","console","log","loginUser","loginBody","credentials","setState","userLoggedIn","loginOpen","newOrder","state","currentOrder","data","id","logoutUser","then","res","orderOpen","json","dishes","total","copyOrders","orders","push","addDishToOrder","dish_id","order_id","dishToAdd","find","dish","length","toggleRegisterForm","registerOpen","toggleLoginForm","toggleOrderForm","payment_info","paymentOpen","componentDidMount","render"],"mappings":";AAAA,OAAO,WAAP;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,GAAP,MAAgB,kBAAhB;AACA,OAAOC,IAAP,MAAiB,mBAAjB,C,CACA;;AACA,OAAOC,KAAP,MAAkB,oBAAlB,C,CACA;;;AAGA,IAAIC,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,iBAA1B;;AAEA,MAAMC,GAAN,SAAkBX,SAAlB,CAA4B;AAC1BY,EAAAA,WAAW,GAAE;AACX;;AADW,SAoBbC,QApBa,GAoBF,MAAOC,CAAP,IAAa;AACtBA,MAAAA,CAAC,CAACC,cAAF;;AACA,UAAG;AACD,cAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACV,OAAO,GAAG,iBAAX,EAA8B;AACxDW,UAAAA,MAAM,EAAE,MADgD;AAExDC,UAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,YAAAA,KAAK,EAAER,CAAC,CAACS,MAAF,CAASD,KAAT,CAAeE,KADH;AAEnBC,YAAAA,QAAQ,EAAEX,CAAC,CAACS,MAAF,CAASE,QAAT,CAAkBD,KAFT;AAGnBE,YAAAA,QAAQ,EAAEZ,CAAC,CAACS,MAAF,CAASG,QAAT,CAAkBF,KAHT;AAInBG,YAAAA,SAAS,EAAEb,CAAC,CAACS,MAAF,CAASI,SAAT,CAAmBH,KAJX;AAKnBI,YAAAA,OAAO,EAAEd,CAAC,CAACS,MAAF,CAASK,OAAT,CAAiBJ,KALP;AAMnBK,YAAAA,MAAM,EAAE,EANW;AAOnBC,YAAAA,MAAM,EAAE,EAPW;AAQnBC,YAAAA,WAAW,EAAE,EARM,CASnB;AACA;AACA;;AAXmB,WAAf,CAFkD;AAexDC,UAAAA,OAAO,EAAE;AACP,4BAAgB;AADT;AAf+C,SAA9B,CAA5B;;AAmBA,YAAIhB,QAAQ,CAACiB,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,eAAKC,SAAL,GAD2B,CAE3B;AACD;AACF,OAxBD,CAyBA,OAAMC,GAAN,EAAW;AACTC,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBF,GAAzB;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACD;AACF,KAnDY;;AAAA,SAqDbC,SArDa,GAqDD,MAAOxB,CAAP,IAAa;AACvBA,MAAAA,CAAC,CAACC,cAAF;AACA,YAAMwB,SAAS,GAAG;AAChBd,QAAAA,QAAQ,EAAEX,CAAC,CAACS,MAAF,CAASE,QAAT,CAAkBD,KADZ;AAEhBE,QAAAA,QAAQ,EAAEZ,CAAC,CAACS,MAAF,CAASG,QAAT,CAAkBF;AAFZ,OAAlB;;AAKA,UAAI;AACF,cAAMR,QAAQ,GAAG,MAAMC,KAAK,CAACV,OAAO,GAAG,cAAX,EAA2B;AACrDW,UAAAA,MAAM,EAAE,MAD6C;AAErDC,UAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAekB,SAAf,CAF+C;AAGrDP,UAAAA,OAAO,EAAE;AACP,4BAAgB;AADT,WAH4C;AAMrDQ,UAAAA,WAAW,EAAE;AANwC,SAA3B,CAA5B;AASAJ,QAAAA,OAAO,CAACC,GAAR,CAAYrB,QAAZ;AACAoB,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBrB,QAAQ,CAACG,IAA/B;;AAEA,YAAGH,QAAQ,CAACiB,MAAT,KAAoB,GAAvB,EAA2B;AACzB,eAAKC,SAAL,GADyB,CAEzB;;AACAE,UAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACA,eAAKI,QAAL,CAAc;AACZ;AACAhB,YAAAA,QAAQ,EAAEX,CAAC,CAACS,MAAF,CAASE,QAAT,CAAkBD,KAFhB;AAGZE,YAAAA,QAAQ,EAAEZ,CAAC,CAACS,MAAF,CAASG,QAAT,CAAkBF,KAHhB;AAIZkB,YAAAA,YAAY,EAAE,IAJF;AAKZC,YAAAA,SAAS,EAAE;AALC,WAAd;AAOA,eAAKC,QAAL;AACAR,UAAAA,OAAO,CAACC,GAAR,CAAY,oBAAoBjB,IAAI,CAACC,SAAL,CAAe,KAAKwB,KAAL,CAAWC,YAAX,CAAwBC,IAAvC,CAAhC;AACAX,UAAAA,OAAO,CAACC,GAAR,CAAY,uBAAuBjB,IAAI,CAACC,SAAL,CAAe,KAAKwB,KAAL,CAAWC,YAAX,CAAwBC,IAAxB,CAA6BC,EAA5C,CAAnC;AACD;AACF,OA5BD,CA6BA,OAAMb,GAAN,EAAU;AACRC,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBF,GAAzB;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACD;AACF,KA7FY;;AAAA,SA+FbY,UA/Fa,GA+FA,MAAM;AACjBb,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACApB,MAAAA,KAAK,CAACV,OAAO,GAAG,eAAX,EAA4B;AAC/BW,QAAAA,MAAM,EAAE,KADuB;AAE/Bc,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAFsB;AAK/BQ,QAAAA,WAAW,EAAE;AALkB,OAA5B,CAAL,CAOCU,IAPD,CAOMC,GAAG,IAAI;AACXf,QAAAA,OAAO,CAACC,GAAR,CAAYc,GAAG,CAAClB,MAAhB;AACAG,QAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACA,aAAKI,QAAL,CAAc;AACZC,UAAAA,YAAY,EAAE,KADF;AAEZU,UAAAA,SAAS,EAAE;AAFC,SAAd;AAID,OAdD;AAeAhB,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKQ,KAAjB;AACD,KAjHY;;AAAA,SAmHbX,SAnHa,GAmHD,MAAM;AAChBE,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACApB,MAAAA,KAAK,CAACV,OAAO,GAAG,UAAX,EAAuB;AAC1BiC,QAAAA,WAAW,EAAE;AADa,OAAvB,CAAL,CAGCU,IAHD,CAGOC,GAAG,IAAI;AACZ,YAAGA,GAAG,CAAClB,MAAJ,KAAe,GAAlB,EAAuB;AACrBG,UAAAA,OAAO,CAACC,GAAR,CAAY,sCAAZ;AACA,iBAAOc,GAAG,CAACE,IAAJ,EAAP;AACD,SAHD,MAGO;AACLjB,UAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ;AACA,iBAAM,EAAN;AACD;AACF,OAXD,EAYCa,IAZD,CAYMH,IAAI,IAAI;AACZX,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAWU,IAAI,CAACA,IAA5B;AACA,aAAKN,QAAL,CAAc;AACZa,UAAAA,MAAM,EAAEP,IAAI,CAACA;AADD,SAAd;AAGAX,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAeU,IAAI,CAACA,IAAhC;AACD,OAlBD;AAmBD,KAxIY;;AAAA,SA0IbH,QA1Ia,GA0IF,YAAY;AACrBR,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;;AAEA,UAAG;AACD,cAAMrB,QAAQ,GAAG,MAAMC,KAAK,CAACV,OAAO,GAAG,UAAX,EAAuB;AACjDW,UAAAA,MAAM,EAAE,MADyC;AAEjDC,UAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBkC,YAAAA,KAAK,EAAE;AADY,WAAf,CAF2C;AAKjDvB,UAAAA,OAAO,EAAE;AACP,4BAAgB;AADT,WALwC;AAQjDQ,UAAAA,WAAW,EAAE;AARoC,SAAvB,CAA5B;AAWAJ,QAAAA,OAAO,CAACC,GAAR,CAAYrB,QAAQ,CAACiB,MAArB;;AAEA,YAAGjB,QAAQ,CAACiB,MAAT,KAAoB,GAAvB,EAA2B;AACzBG,UAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACA,gBAAMO,QAAQ,GAAG,MAAM5B,QAAQ,CAACqC,IAAT,EAAvB;AACAjB,UAAAA,OAAO,CAACC,GAAR,CAAY,gBAAgBO,QAA5B;AACA,gBAAMY,UAAU,GAAG,CAAC,GAAG,KAAKX,KAAL,CAAWY,MAAf,CAAnB;AACAD,UAAAA,UAAU,CAACE,IAAX,CAAgBd,QAAhB;AACA,eAAKH,QAAL,CAAc;AACZgB,YAAAA,MAAM,EAAED,UADI;AAEZV,YAAAA,YAAY,EAAEF,QAFF;AAGZQ,YAAAA,SAAS,EAAE;AAHC,WAAd;AAKAhB,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAejB,IAAI,CAACC,SAAL,CAAeuB,QAAf,CAA3B;AACAR,UAAAA,OAAO,CAACC,GAAR,CAAY,iBAAiBjB,IAAI,CAACC,SAAL,CAAeuB,QAAQ,CAACG,IAAT,CAAcC,EAA7B,CAA7B;AACAZ,UAAAA,OAAO,CAACC,GAAR,CAAY,mBAAmBjB,IAAI,CAACC,SAAL,CAAe,KAAKwB,KAAL,CAAWC,YAA1B,CAA/B;AACD;AACF,OA7BD,CA8BA,OAAMX,GAAN,EAAU;AACRC,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBF,GAAzB;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACD;AAEF,KAhLY;;AAAA,SAkLbsB,cAlLa,GAkLG,CAACC,OAAD,EAAUC,QAAV,KAAsB;AACpCzB,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAcuB,OAA1B,EAAkC,eAAeC,QAAjD,EADoC,CAGpC;AACA;AACA;AACA;;AACEzB,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAqBjB,IAAI,CAACC,SAAL,CAAe,KAAKwB,KAAL,CAAWC,YAA1B,CAAjC,EAPkC,CAQpC;;AACE,YAAMU,UAAU,GAAG,CAAC,GAAG,KAAKX,KAAL,CAAWY,MAAf,CAAnB;AACA,YAAMK,SAAS,GAAG,KAAKjB,KAAL,CAAWS,MAAX,CAAkBS,IAAlB,CAAuBC,IAAI,IAAIA,IAAI,CAACJ,OAAL,KAAiBA,OAAhD,CAAlB;AACAxB,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAkBjB,IAAI,CAACC,SAAL,CAAeyC,SAAf,CAA9B;AACAN,MAAAA,UAAU,CAACE,IAAX,CAAgBI,SAAhB;AACA,WAAKrB,QAAL,CAAc;AACZgB,QAAAA,MAAM,EAAED,UADI;AAEZV,QAAAA,YAAY,EAAEU,UAAU,CAACA,UAAU,CAACS,MAAX,GAAmB,CAApB;AAFZ,OAAd;AAIA7B,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAoB,KAAKQ,KAAL,CAAWC,YAA3C;AACH,KApMY;;AAAA,SAsMboB,kBAtMa,GAsMQ,MAAM;AACzB,WAAKzB,QAAL,CAAc;AACZ0B,QAAAA,YAAY,EAAE,CAAC,KAAKtB,KAAL,CAAWsB;AADd,OAAd,EAEG,MAAI/B,OAAO,CAACC,GAAR,CAAY,mCAAmC,KAAKQ,KAAL,CAAWsB,YAA1D,CAFP;AAIA/B,MAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AACD,KA5MY;;AAAA,SA8Mb+B,eA9Ma,GA8MK,MAAM;AACtB,WAAK3B,QAAL,CAAc;AACZE,QAAAA,SAAS,EAAE,CAAC,KAAKE,KAAL,CAAWF;AADX,OAAd,EAEG,MAAIP,OAAO,CAACC,GAAR,CAAY,gCAAgC,KAAKQ,KAAL,CAAWF,SAAvD,CAFP;AAIAP,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACD,KApNY;;AAAA,SAsNbgC,eAtNa,GAsNK,MAAM;AACtB,WAAK5B,QAAL,CAAc;AACZW,QAAAA,SAAS,EAAE,CAAC,KAAKP,KAAL,CAAWO;AADX,OAAd,EAEG,MAAIhB,OAAO,CAACC,GAAR,CAAY,gCAAgC,KAAKQ,KAAL,CAAWO,SAAvD,CAFP;AAIAhB,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACD,KA5NY;;AAEX,SAAKQ,KAAL,GAAa;AACXpB,MAAAA,QAAQ,EAAE,EADC;AAEXC,MAAAA,QAAQ,EAAE,EAFC;AAGXJ,MAAAA,KAAK,EAAE,EAHI;AAIXK,MAAAA,SAAS,EAAE,EAJA;AAKXC,MAAAA,OAAO,EAAE,EALE;AAMX0C,MAAAA,YAAY,EAAE,EANH;AAOX5B,MAAAA,YAAY,EAAE,KAPH;AAQXyB,MAAAA,YAAY,EAAE,KARH;AASXxB,MAAAA,SAAS,EAAE,KATA;AAUXS,MAAAA,SAAS,EAAE,KAVA;AAWXmB,MAAAA,WAAW,EAAE,KAXF;AAYXd,MAAAA,MAAM,EAAE,EAZG;AAaXH,MAAAA,MAAM,EAAE,EAbG;AAcXR,MAAAA,YAAY,EAAE;AAdH,KAAb;AAgBD;;AA4MD0B,EAAAA,iBAAiB,GAAE;AACjB,SAAKtC,SAAL;AACD;;AAEDuC,EAAAA,MAAM,GAAE;AAEN,wBACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA,8BACA,QAAC,GAAD;AACE,QAAA,kBAAkB,EAAE,KAAKP,kBAD3B;AAEE,QAAA,YAAY,EAAE,KAAKrB,KAAL,CAAWsB,YAF3B;AAGE,QAAA,eAAe,EAAE,KAAKC,eAHxB;AAIE,QAAA,SAAS,EAAE,KAAKvB,KAAL,CAAWF,SAJxB;AAKE,QAAA,eAAe,EAAE,KAAK0B,eALxB;AAME,QAAA,SAAS,EAAE,KAAKxB,KAAL,CAAWO,SANxB;AAOE,QAAA,UAAU,EAAE,KAAKH,UAPnB;AAQE,QAAA,YAAY,EAAE,KAAKJ,KAAL,CAAWH;AAR3B;AAAA;AAAA;AAAA;AAAA,cADA,eAWA,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA,cAXA,eAaA,QAAC,QAAD;AACE,QAAA,QAAQ,EAAE,KAAK7B,QADjB;AAEE,QAAA,YAAY,EAAE,KAAKgC,KAAL,CAAWsB;AAF3B;AAAA;AAAA;AAAA;AAAA,cAbA,eAiBA,QAAC,KAAD;AACE,QAAA,SAAS,EAAE,KAAK7B,SADlB;AAEE,QAAA,SAAS,EAAE,KAAKO,KAAL,CAAWF;AAFxB;AAAA;AAAA;AAAA;AAAA,cAjBA,eAsBA;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA,gCACE,QAAC,IAAD;AACE,UAAA,MAAM,EAAI,KAAKE,KAAL,CAAWS,MADvB;AAEE,UAAA,QAAQ,EAAI,KAAKV,QAFnB;AAGE,UAAA,cAAc,EAAI,KAAKe;AAHzB;AAAA;AAAA;AAAA;AAAA,gBADF,eAME,QAAC,KAAD;AACA,UAAA,SAAS,EAAE,KAAKd,KAAL,CAAWO,SADtB;AAEA,UAAA,YAAY,EAAE,KAAKP,KAAL,CAAWC;AAFzB;AAAA;AAAA;AAAA;AAAA,gBANF;AAAA;AAAA;AAAA;AAAA;AAAA,cAtBA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAuCD;;AA5QyB;;AA+Q5B,eAAenC,GAAf","sourcesContent":["import './App.css';\nimport React, { Component } from 'react';\nimport Register from './components/Register';\nimport Login from './components/Login';\nimport Logo from './components/Logo';\nimport Nav from './components/Nav';\nimport Menu from './components/Menu';\n// import Dish from './components/Dish';\nimport Order from './components/Order';\n// import Payment from './components/Payment';\n\n\nlet baseUrl = process.env.REACT_APP_BASEURL\n\nclass App extends Component {\n  constructor(){\n    super()\n    this.state = {\n      username: '',\n      password: '',\n      email: '',\n      phone_num: '',\n      address: '',\n      payment_info: {},\n      userLoggedIn: false,\n      registerOpen: false,\n      loginOpen: false,\n      orderOpen: false,\n      paymentOpen: false,\n      orders: [],\n      dishes: [],\n      currentOrder: [],\n    }\n  }\n\n  register = async (e) => {\n    e.preventDefault()\n    try{\n      const response = await fetch(baseUrl + '/users/register', {\n        method: 'POST',\n        body: JSON.stringify({\n          email: e.target.email.value,\n          username: e.target.username.value,\n          password: e.target.password.value,\n          phone_num: e.target.phone_num.value,\n          address: e.target.address.value,\n          cc_num: '',\n          cc_exp: '',\n          cc_sec_code: '',\n          // cc_num: e.target.cc_num.value,\n          // cc_exp: e.target.cc_exp.value,\n          // cc_sec_code: e.target.cc_sec_code.value,\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      })\n      if (response.status === 200) {\n        this.getDishes()\n        // this.getOrders()\n      }\n    }\n    catch(err) {\n      console.log('Error => ', err)\n      console.log('ðŸ˜– register failed ðŸ˜–')\n    }\n  }\n\n  loginUser = async (e) => {\n    e.preventDefault()\n    const loginBody = {\n      username: e.target.username.value,\n      password: e.target.password.value,\n    }\n\n    try {\n      const response = await fetch(baseUrl + '/users/login', {\n        method: 'POST',\n        body: JSON.stringify(loginBody),\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      })\n\n      console.log(response)\n      console.log('BODY: ', response.body)\n\n      if(response.status === 200){\n        this.getDishes()\n        // this.getOrders()\n        console.log('ðŸ¥³ login successful! ðŸ¥³')\n        this.setState({\n          // need to populate the rest of state for users\n          username: e.target.username.value,\n          password: e.target.password.value,\n          userLoggedIn: true,\n          loginOpen: false,\n          })\n        this.newOrder()\n        console.log('current order: ' + JSON.stringify(this.state.currentOrder.data))\n        console.log('current order id: ' + JSON.stringify(this.state.currentOrder.data.id))\n      }\n    }\n    catch(err){\n      console.log('Error => ', err)\n      console.log('ðŸ˜– login failed ðŸ˜–')\n    }\n  }\n\n  logoutUser = () => {\n    console.log('hit logout button')\n    fetch(baseUrl + '/users/logout', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include'\n    })\n    .then(res => {\n      console.log(res.status)\n      console.log('ðŸ§¨ logout successful! ðŸ§¨')\n      this.setState({\n        userLoggedIn: false,\n        orderOpen: false,\n      })\n    })\n    console.log(this.state)\n  }\n\n  getDishes = () => {\n    console.log('hit getDishes')\n    fetch(baseUrl + '/dishes/', {\n      credentials: 'include'\n    })\n    .then (res => {\n      if(res.status === 200) {\n        console.log('ðŸ¥¡ fetch index dishes successful! ðŸ¥¡')\n        return res.json()\n      } else {\n        console.log('fetch index dishes failed...ðŸ’£')\n        return[]\n      }\n    })\n    .then(data => {\n      console.log('data: ' + data.data)\n      this.setState({\n        dishes: data.data\n      })\n      console.log('new data: ' + data.data)\n    })\n  } \n\n  newOrder = async () => {\n    console.log('hit newOrder')\n\n    try{\n      const response = await fetch(baseUrl + '/orders/', {\n        method: 'POST',\n        body: JSON.stringify({\n          total: 0.0,\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }, \n        credentials: 'include'\n      })\n      \n      console.log(response.status)\n\n      if(response.status === 201){\n        console.log('new order created!')\n        const newOrder = await response.json()\n        console.log('new order :' + newOrder)\n        const copyOrders = [...this.state.orders]\n        copyOrders.push(newOrder)\n        this.setState({\n          orders: copyOrders,\n          currentOrder: newOrder,\n          orderOpen: true,\n        })\n        console.log('newOrder: ' + JSON.stringify(newOrder))\n        console.log('newOrderID: ' + JSON.stringify(newOrder.data.id))\n        console.log('currentOrder: ' + JSON.stringify(this.state.currentOrder))\n      }\n    }\n    catch(err){\n      console.log('Error -> ', err)\n      console.log('order not created...')\n    }\n\n  }\n\n  addDishToOrder =(dish_id, order_id)=> {\n    console.log('dish id: ' + dish_id,'order id :' + order_id)\n    \n    // if(this.currentOrderId === undefined){\n    //   this.newOrder()\n    //   console.log('order created: ' + this.state.currentOrder)\n    // } else {\n      console.log('existing order: ' + JSON.stringify(this.state.currentOrder))\n    // }\n      const copyOrders = [...this.state.orders]\n      const dishToAdd = this.state.dishes.find(dish => dish.dish_id === dish_id)\n      console.log('dish to add: ' + JSON.stringify(dishToAdd))\n      copyOrders.push(dishToAdd)\n      this.setState({\n        orders: copyOrders,\n        currentOrder: copyOrders[copyOrders.length -1],\n      })\n      console.log('current order: ' + this.state.currentOrder)\n  }\n\n  toggleRegisterForm = () => {\n    this.setState({\n      registerOpen: !this.state.registerOpen,\n    }, ()=>console.log('registerOpen after set state: ' + this.state.registerOpen)\n    )\n    console.log('toggleRegisterForm clicked')\n  }\n\n  toggleLoginForm = () => {\n    this.setState({\n      loginOpen: !this.state.loginOpen,\n    }, ()=>console.log('loginOpen after set state: ' + this.state.loginOpen)\n    )\n    console.log('toggleLoginForm clicked')\n  }\n  \n  toggleOrderForm = () => {\n    this.setState({\n      orderOpen: !this.state.orderOpen,\n    }, ()=>console.log('orderOpen after set state: ' + this.state.orderOpen)\n    )\n    console.log('toggleOrderForm clicked')\n  }\n\n  componentDidMount(){\n    this.getDishes()\n  }\n  \n  render(){\n    \n    return (\n      <div className=\"App\">\n      <Nav \n        toggleRegisterForm={this.toggleRegisterForm}\n        registerOpen={this.state.registerOpen}\n        toggleLoginForm={this.toggleLoginForm}\n        loginOpen={this.state.loginOpen}\n        toggleOrderForm={this.toggleOrderForm}\n        orderOpen={this.state.orderOpen}\n        logoutUser={this.logoutUser}\n        userLoggedIn={this.state.userLoggedIn}\n      />\n      <Logo />\n\n      <Register \n        register={this.register}\n        registerOpen={this.state.registerOpen}\n      />\n      <Login \n        loginUser={this.loginUser}\n        loginOpen={this.state.loginOpen}\n      />\n\n      <div className=\"bottom-container\">\n        <Menu \n          dishes = {this.state.dishes}\n          newOrder = {this.newOrder}\n          addDishToOrder = {this.addDishToOrder}\n        />\n        <Order \n        orderOpen={this.state.orderOpen}\n        currentOrder={this.state.currentOrder}\n        />\n      </div>\n        {/* {this.paymentOpen &&  */}\n        {/* <Payment /> */}\n        {/* } */}\n    </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}