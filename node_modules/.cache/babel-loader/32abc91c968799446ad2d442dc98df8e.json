{"ast":null,"code":"var _jsxFileName = \"/Users/MattAguiluz/sei-bromeliad/projects/Project4_neon-pyramid/the-neon-pyramid-frontend/the-neon-pyramid-frontend/neon-pyramid/src/App.js\";\nimport './App.css';\nimport React, { Component } from 'react';\nimport Register from './components/Register';\nimport Login from './components/Login';\nimport Logo from './components/Logo';\nimport Nav from './components/Nav';\nimport Menu from './components/Menu';\nimport Order from './components/Order';\nimport OrderSpacer from './components/OrderSpacer';\nimport Payment from './components/Payment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet baseUrl = process.env.REACT_APP_BASEURL;\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.register = async e => {\n      e.preventDefault();\n\n      try {\n        const response = await fetch(baseUrl + '/users/register', {\n          method: 'POST',\n          body: JSON.stringify({\n            email: e.target.email.value,\n            username: e.target.username.value,\n            password: e.target.password.value,\n            phone_num: e.target.phone_num.value,\n            address: e.target.address.value,\n            cc_num: '',\n            cc_exp: '',\n            cc_sec_code: ''\n          }),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n\n        if (response.status === 201) {\n          this.getDishes();\n          console.log('🥳 register successful! 🥳');\n          this.setState({\n            registerOpen: false,\n            loginOpen: true\n          });\n        } else {}\n      } catch (err) {\n        console.log('Error => ', err);\n        console.log('😖 register failed 😖');\n      }\n    };\n\n    this.loginUser = async e => {\n      e.preventDefault();\n      const loginBody = {\n        username: e.target.username.value,\n        password: e.target.password.value\n      };\n\n      try {\n        const response = await fetch(baseUrl + '/users/login', {\n          method: 'POST',\n          body: JSON.stringify(loginBody),\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          credentials: 'include'\n        });\n\n        if (response.status === 200) {\n          this.getOrders();\n          this.getDishes();\n          console.log('🥳 login successful! 🥳');\n          this.setState({\n            username: e.target.username.value,\n            password: e.target.password.value,\n            userLoggedIn: true,\n            loginOpen: false,\n            menuOpen: true,\n            logoOpen: false\n          });\n          this.newOrder();\n        } else {\n          alert('☠️ Incorrect username/login... ☠️ Please try again or register before logging in.');\n          console.log('😖 login failed 😖');\n        }\n      } catch (err) {\n        alert('login unsuccessful');\n        console.log('Error => ', err);\n        console.log('😖 login failed 😖');\n      }\n    };\n\n    this.logoutUser = () => {\n      fetch(baseUrl + '/users/logout', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      }).then(res => {\n        console.log(res.status);\n        console.log('🧨 logout successful! 🧨');\n        this.setState({\n          userLoggedIn: false,\n          orderOpen: false\n        });\n      });\n    };\n\n    this.getDishes = () => {\n      console.log('hit getDishes');\n      fetch(baseUrl + '/dishes/', {\n        credentials: 'include'\n      }).then(res => {\n        if (res.status === 200) {\n          console.log('🥡 fetch index dishes successful! 🥡');\n          return res.json();\n        } else {\n          console.log('fetch index dishes failed...💣');\n          return [];\n        }\n      }).then(data => {\n        this.setState({\n          dishes: data.data\n        });\n      });\n    };\n\n    this.getOrders = () => {\n      fetch(baseUrl + '/orders/', {\n        credentials: 'include'\n      }).then(res => {\n        if (res.status === 200) {\n          console.log('📝 fetch index orders successful! 📝');\n          return res.json();\n        } else {\n          console.log('fetch index orders failed...💣');\n          return [];\n        }\n      }).then(data => {\n        this.setState({\n          orders: data.data\n        });\n        console.log('new data: ' + JSON.stringify(data.data));\n      });\n    };\n\n    this.newOrder = async () => {\n      try {\n        const response = await fetch(baseUrl + '/orders/', {\n          method: 'POST',\n          body: JSON.stringify({\n            total: 0.0\n          }),\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          credentials: 'include'\n        });\n\n        if (response.status === 201) {\n          const newOrder = await response.json();\n          this.getOrders();\n          const copyOrders = [...this.state.orders];\n          copyOrders.push(newOrder);\n          this.setState({\n            orders: copyOrders,\n            currentOrderId: newOrder.data.id,\n            orderOpen: true\n          });\n        }\n      } catch (err) {\n        console.log('Error -> ', err);\n        console.log('order not created...');\n      }\n    };\n\n    this.sumOrderedDishPrices = () => {\n      const dishes = this.state.orderedDishes;\n      const total = dishes.reduce((total, obj) => obj.dish.price + total, 0);\n      this.setState({\n        currentOrderTotal: total\n      });\n    };\n\n    this.subOrderedDishPrices = id => {\n      const findIndex = this.state.orderedDishes.findIndex(orderedDish => orderedDish.id === id);\n      const orderedDish = this.state.orderedDishes[findIndex];\n      const currentTotal = this.state.currentOrderTotal;\n      const newTotal = currentTotal - orderedDish.dish.price;\n      this.setState({\n        currentOrderTotal: newTotal\n      });\n    };\n\n    this.addDishToOrder = (order_id, dish_id) => {\n      if (!this.state.userLoggedIn) {\n        alert('❌ You must log in first to create an order. ❌');\n        this.setState({\n          loginOpen: true,\n          logoOpen: false,\n          menuOpen: false,\n          orderOpen: false\n        });\n      } else {\n        fetch(baseUrl + '/ordered_dishes/' + order_id + '/' + dish_id + '/', {\n          method: 'POST',\n          credentials: 'include'\n        }).then(res => {\n          if (res.status === 200) {\n            console.log('dish added to order!');\n            return res.json();\n          } else {\n            console.log('dish was not added...');\n            return [];\n          }\n        }).then(data => {\n          const copyOrderedDishes = [...this.state.orderedDishes, data.data];\n          this.setState({\n            currentOrderId: order_id,\n            orderedDishes: copyOrderedDishes,\n            currentOrderedDishId: copyOrderedDishes[copyOrderedDishes.length - 1].id,\n            currentOrderTotal: null\n          });\n        }).then(() => {\n          this.sumOrderedDishPrices();\n        });\n      }\n    };\n\n    this.updateOrderedDish = (order_id, dish_id, ordered_dish_id) => {\n      fetch(baseUrl + '/ordered_dishes/' + order_id + '/' + dish_id + '/' + ordered_dish_id, {\n        method: 'PUT',\n        credentials: 'include'\n      }).then(res => {\n        if (res.status === 200) {\n          console.log('ordered dish updated!');\n          return res.json();\n        } else {\n          console.log('dish was not updated...');\n          return [];\n        }\n      }).then(data => {\n        const updatedOrderedDish = data.data;\n        console.log(updatedOrderedDish);\n        const findIndex = this.state.orderedDishes.findIndex(orderedDish => orderedDish.id === updatedOrderedDish.id);\n        const copyOrderedDishes = [...this.state.orderedDishes];\n        copyOrderedDishes[findIndex] = updatedOrderedDish;\n        this.setState({\n          orderedDishes: copyOrderedDishes\n        });\n      });\n    };\n\n    this.deleteOrderedDish = id => {\n      console.log(id);\n      this.subOrderedDishPrices(id);\n      fetch(baseUrl + '/ordered_dishes/' + id + '/', {\n        method: 'DELETE'\n      }).then(res => {\n        console.log(res);\n        const findIndex = this.state.orderedDishes.findIndex(orderedDish => orderedDish.id === id);\n        const copyOrderedDishes = [...this.state.orderedDishes];\n        copyOrderedDishes.splice(findIndex, 1);\n        this.setState({\n          orderedDishes: copyOrderedDishes\n        });\n      });\n    };\n\n    this.toggleLogo = () => {\n      this.setState({\n        logoOpen: true,\n        menuOpen: false,\n        registerOpen: false,\n        loginOpen: false\n      }, () => console.log('logoOpen after set state: ' + this.state.logoOpen));\n    };\n\n    this.toggleMenu = () => {\n      if (this.state.dishes === []) {\n        this.getDishes();\n      }\n\n      this.setState({\n        logoOpen: false,\n        menuOpen: true,\n        registerOpen: false,\n        loginOpen: false\n      }, () => console.log('logoOpen after set state: ' + this.state.logoOpen));\n      console.log('toggleLogo clicked');\n    };\n\n    this.toggleRegisterForm = () => {\n      this.setState({\n        registerOpen: !this.state.registerOpen,\n        loginOpen: false,\n        menuOpen: false,\n        logoOpen: false\n      }, () => console.log('registerOpen after set state: ' + this.state.registerOpen));\n    };\n\n    this.toggleLoginForm = () => {\n      this.setState({\n        loginOpen: !this.state.loginOpen,\n        menuOpen: false,\n        logoOpen: false,\n        registerOpen: false\n      }, () => console.log('loginOpen after set state: ' + this.state.loginOpen));\n    };\n\n    this.toggleOrderForm = () => {\n      this.setState({\n        orderOpen: !this.state.orderOpen\n      }, () => console.log('orderOpen after set state: ' + this.state.orderOpen));\n    };\n\n    this.togglePaymentForm = () => {\n      this.setState({\n        paymentOpen: !this.state.paymentOpen\n      }, () => console.log('paymentOpen after set state: ' + this.state.paymentOpen));\n    };\n\n    this.checkout = () => {\n      alert('Your order has been completed!'); // square api call needs to be ported here\n    };\n\n    this.state = {\n      username: '',\n      password: '',\n      email: '',\n      phone_num: '',\n      address: '',\n      cc_num: '',\n      cc_exp: '',\n      cc_sec_code: '',\n      firstName: '',\n      lastName: '',\n      userLoggedIn: false,\n      logoOpen: true,\n      registerOpen: false,\n      loginOpen: false,\n      menuOpen: false,\n      orderOpen: false,\n      paymentOpen: false,\n      orders: [],\n      dishes: [],\n      currentOrderId: null,\n      orderedDishes: [],\n      orderEmpty: true,\n      currentOrderedDishId: null,\n      currentOrderTotal: 0\n    };\n  }\n\n  componentDidMount() {\n    this.getDishes();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Payment, {\n        currentOrderTotal: this.state.currentOrderTotal,\n        paymentOpen: this.state.paymentOpen,\n        togglePaymentForm: this.togglePaymentForm,\n        checkout: this.checkout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Nav, {\n        toggleRegisterForm: this.toggleRegisterForm,\n        registerOpen: this.state.registerOpen,\n        toggleLoginForm: this.toggleLoginForm,\n        loginOpen: this.state.loginOpen,\n        toggleOrderForm: this.toggleOrderForm,\n        toggleLogo: this.toggleLogo,\n        toggleMenu: this.toggleMenu,\n        orderOpen: this.state.orderOpen,\n        logoutUser: this.logoutUser,\n        userLoggedIn: this.state.userLoggedIn\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Logo, {\n        logoOpen: this.state.logoOpen\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Register, {\n        register: this.register,\n        registerOpen: this.state.registerOpen,\n        toggleRegisterForm: this.toggleRegisterForm,\n        toggleMenu: this.toggleMenu\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Login, {\n        loginUser: this.loginUser,\n        loginOpen: this.state.loginOpen,\n        toggleMenu: this.toggleMenu,\n        toggleRegisterForm: this.toggleRegisterForm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bottom-container\",\n        children: [/*#__PURE__*/_jsxDEV(Menu, {\n          dishes: this.state.dishes,\n          currentOrderId: this.state.currentOrderId,\n          addDishToOrder: this.addDishToOrder,\n          menuOpen: this.state.menuOpen\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Order, {\n          username: this.state.username,\n          orderOpen: this.state.orderOpen,\n          orderedDishes: this.state.orderedDishes,\n          orderedDishQty: this.state.orderedDishQty,\n          currentOrderId: this.state.currentOrderId,\n          orders: this.state.orders,\n          currentOrderTotal: this.state.currentOrderTotal,\n          deletedOrderedDish: this.deleteOrderedDish,\n          togglePaymentForm: this.togglePaymentForm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(OrderSpacer, {\n          orderOpen: this.state.orderOpen\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/MattAguiluz/sei-bromeliad/projects/Project4_neon-pyramid/the-neon-pyramid-frontend/the-neon-pyramid-frontend/neon-pyramid/src/App.js"],"names":["React","Component","Register","Login","Logo","Nav","Menu","Order","OrderSpacer","Payment","baseUrl","process","env","REACT_APP_BASEURL","App","constructor","register","e","preventDefault","response","fetch","method","body","JSON","stringify","email","target","value","username","password","phone_num","address","cc_num","cc_exp","cc_sec_code","headers","status","getDishes","console","log","setState","registerOpen","loginOpen","err","loginUser","loginBody","credentials","getOrders","userLoggedIn","menuOpen","logoOpen","newOrder","alert","logoutUser","then","res","orderOpen","json","data","dishes","orders","total","copyOrders","state","push","currentOrderId","id","sumOrderedDishPrices","orderedDishes","reduce","obj","dish","price","currentOrderTotal","subOrderedDishPrices","findIndex","orderedDish","currentTotal","newTotal","addDishToOrder","order_id","dish_id","copyOrderedDishes","currentOrderedDishId","length","updateOrderedDish","ordered_dish_id","updatedOrderedDish","deleteOrderedDish","splice","toggleLogo","toggleMenu","toggleRegisterForm","toggleLoginForm","toggleOrderForm","togglePaymentForm","paymentOpen","checkout","firstName","lastName","orderEmpty","componentDidMount","render","orderedDishQty"],"mappings":"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","sourcesContent":["import './App.css';\nimport React, { Component } from 'react';\nimport Register from './components/Register';\nimport Login from './components/Login';\nimport Logo from './components/Logo';\nimport Nav from './components/Nav';\nimport Menu from './components/Menu';\nimport Order from './components/Order';\nimport OrderSpacer from './components/OrderSpacer';\nimport Payment from './components/Payment';\n\n\nlet baseUrl = process.env.REACT_APP_BASEURL\n\nclass App extends Component {\n  constructor(){\n    super()\n    this.state = {\n      username: '',\n      password: '',\n      email: '',\n      phone_num: '',\n      address: '',\n      cc_num: '',\n      cc_exp:  '',\n      cc_sec_code: '',\n      firstName: '',\n      lastName: '',\n      userLoggedIn: false,\n      logoOpen: true,\n      registerOpen: false,\n      loginOpen: false,\n      menuOpen: false,\n      orderOpen: false,\n      paymentOpen: false,\n      orders: [],\n      dishes: [],\n      currentOrderId: null,\n      orderedDishes: [],\n      orderEmpty: true,\n      currentOrderedDishId: null,\n      currentOrderTotal: 0,\n    }\n  }\n  \n\n  register = async (e) => {\n    e.preventDefault()\n    try{\n      const response = await fetch(baseUrl + '/users/register', {\n        method: 'POST',\n        body: JSON.stringify({\n          email: e.target.email.value,\n          username: e.target.username.value,\n          password: e.target.password.value,\n          phone_num: e.target.phone_num.value,\n          address: e.target.address.value,\n          cc_num: '',\n          cc_exp: '',\n          cc_sec_code: '',\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      })\n\n      if (response.status === 201) {\n        this.getDishes()\n        console.log('🥳 register successful! 🥳')\n        this.setState({\n          registerOpen: false,\n          loginOpen: true,\n          })\n      } else {\n\n      }\n    }\n    catch(err) {\n      console.log('Error => ', err)\n      console.log('😖 register failed 😖')\n    }\n  }\n  \n  loginUser = async (e) => {\n    e.preventDefault()\n    const loginBody = {\n      username: e.target.username.value,\n      password: e.target.password.value,\n    }\n    \n    try {\n      const response = await fetch(baseUrl + '/users/login', {\n        method: 'POST',\n        body: JSON.stringify(loginBody),\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      })\n      if(response.status === 200){\n        this.getOrders()\n        this.getDishes()\n        console.log('🥳 login successful! 🥳')\n        this.setState({\n          username: e.target.username.value,\n          password: e.target.password.value,\n          userLoggedIn: true,\n          loginOpen: false,\n          menuOpen: true,\n          logoOpen: false,\n          })\n        this.newOrder()\n      } else {\n        alert('☠️ Incorrect username/login... ☠️ Please try again or register before logging in.')\n        console.log('😖 login failed 😖')\n      }\n    }\n    catch(err){\n      alert('login unsuccessful')\n      console.log('Error => ', err)\n      console.log('😖 login failed 😖')\n    }\n  }\n\n  logoutUser = () => {\n    fetch(baseUrl + '/users/logout', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include'\n    })\n    .then(res => {\n      console.log(res.status)\n      console.log('🧨 logout successful! 🧨')\n      this.setState({\n        userLoggedIn: false,\n        orderOpen: false,\n      })\n    })\n  }\n\n  getDishes = () => {\n    console.log('hit getDishes')\n    fetch(baseUrl + '/dishes/', {\n      credentials: 'include'\n    })\n    .then (res => {\n      if(res.status === 200) {\n        console.log('🥡 fetch index dishes successful! 🥡')\n        return res.json()\n      } else {\n        console.log('fetch index dishes failed...💣')\n        return[]\n      }\n    })\n    .then(data => {\n      this.setState({\n        dishes: data.data\n      })\n    })\n  }\n\n  getOrders = () => {\n    fetch(baseUrl + '/orders/', {\n      credentials: 'include'\n    })\n    .then (res => {\n      if(res.status === 200) {\n        console.log('📝 fetch index orders successful! 📝')\n        return res.json()\n      } else {\n        console.log('fetch index orders failed...💣')\n        return[]\n      }\n    })\n    .then(data => {\n      this.setState({\n        orders: data.data\n      })\n      console.log('new data: ' + JSON.stringify(data.data))\n    })\n  }\n\n  newOrder = async () => {\n    try{\n      const response = await fetch(baseUrl + '/orders/', {\n        method: 'POST',\n        body: JSON.stringify({\n          total: 0.0,\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }, \n        credentials: 'include'\n      })\n      if(response.status === 201){\n        const newOrder = await response.json()\n        this.getOrders()\n        const copyOrders = [...this.state.orders]\n        copyOrders.push(newOrder)\n        this.setState({\n          orders: copyOrders,\n          currentOrderId: newOrder.data.id,\n          orderOpen: true,\n        })\n      }\n    }\n    catch(err){\n      console.log('Error -> ', err)\n      console.log('order not created...')\n    }\n  }\n\n  sumOrderedDishPrices = () => {\n  const dishes = this.state.orderedDishes\n  const total = dishes.reduce((total, obj) => obj.dish.price + total, 0)\n  this.setState({\n    currentOrderTotal: total,\n  })\n}\n\n  subOrderedDishPrices = (id) => {\n    const findIndex = this.state.orderedDishes.findIndex(orderedDish => orderedDish.id === id)\n    const orderedDish = this.state.orderedDishes[findIndex]\n    const currentTotal = this.state.currentOrderTotal\n    const newTotal = currentTotal - orderedDish.dish.price\n    this.setState({\n      currentOrderTotal: newTotal,\n    })\n\n  }\n\n  addDishToOrder =(order_id, dish_id)=> {\n    if(!this.state.userLoggedIn){\n      alert('❌ You must log in first to create an order. ❌')\n      this.setState({\n        loginOpen: true,\n        logoOpen: false,\n        menuOpen: false,\n        orderOpen: false,\n      })\n    } else {\n      fetch(baseUrl + '/ordered_dishes/' + order_id + '/' + dish_id + '/', {\n        method: 'POST',\n        credentials: 'include',\n      })\n      .then(res => {\n        if(res.status === 200){\n          console.log('dish added to order!')\n          return res.json()\n        } else {\n          console.log('dish was not added...')\n          return []\n        }\n      })\n      .then(data => {\n        const copyOrderedDishes = [...this.state.orderedDishes, data.data]\n        this.setState({\n          currentOrderId: order_id,\n          orderedDishes: copyOrderedDishes,\n          currentOrderedDishId: copyOrderedDishes[copyOrderedDishes.length-1].id,\n          currentOrderTotal: null,\n        })\n      })\n      .then(()=>{\n        this.sumOrderedDishPrices()\n      })\n    }\n\n  }\n\n   updateOrderedDish = (order_id, dish_id, ordered_dish_id) => {\n    fetch(baseUrl + '/ordered_dishes/' + order_id + '/' + dish_id + '/' + ordered_dish_id, { \n      method: 'PUT',\n      credentials: 'include'\n    })\n    .then(res => {\n      if(res.status === 200){\n        console.log('ordered dish updated!')\n        return res.json()\n      } else {\n        console.log('dish was not updated...')\n        return []\n      }\n    })\n    .then(data => {\n      const updatedOrderedDish = data.data\n      console.log(updatedOrderedDish)\n      const findIndex = this.state.orderedDishes.findIndex(orderedDish => orderedDish.id === updatedOrderedDish.id)\n      const copyOrderedDishes = [...this.state.orderedDishes]\n      copyOrderedDishes[findIndex] = updatedOrderedDish\n      this.setState({\n        orderedDishes: copyOrderedDishes\n      })\n    })\n  }\n\n  deleteOrderedDish = (id) => {\n    console.log(id)\n    this.subOrderedDishPrices(id)\n    fetch(baseUrl + '/ordered_dishes/' + id + '/', {\n      method: 'DELETE',\n    })\n    .then(res => {\n      console.log(res)\n      const findIndex = this.state.orderedDishes.findIndex(orderedDish => orderedDish.id === id)\n      const copyOrderedDishes = [...this.state.orderedDishes]\n      copyOrderedDishes.splice(findIndex, 1)\n      this.setState({\n        orderedDishes: copyOrderedDishes,\n      })\n    })\n  }\n\n  toggleLogo = () => {\n    this.setState({\n      logoOpen: true,\n      menuOpen: false,\n      registerOpen: false,\n      loginOpen: false,\n    }, ()=>console.log('logoOpen after set state: ' + this.state.logoOpen)\n    )\n  }\n\n  toggleMenu = () => {\n    if(this.state.dishes === []){\n      this.getDishes()\n    }\n    this.setState({\n      logoOpen: false,\n      menuOpen: true,\n      registerOpen: false,\n      loginOpen: false,\n    }, ()=>console.log('logoOpen after set state: ' + this.state.logoOpen)\n    )\n    console.log('toggleLogo clicked')\n  }\n\n\n  toggleRegisterForm = () => {\n    this.setState({\n      registerOpen: !this.state.registerOpen,\n      loginOpen: false,\n      menuOpen: false,\n      logoOpen: false,\n    }, ()=>console.log('registerOpen after set state: ' + this.state.registerOpen)\n    )\n  }\n  \n  toggleLoginForm = () => {\n    this.setState({\n      loginOpen: !this.state.loginOpen,\n      menuOpen: false,\n      logoOpen: false,\n      registerOpen: false,\n    }, ()=>console.log('loginOpen after set state: ' + this.state.loginOpen)\n    )\n  }\n  \n  toggleOrderForm = () => {\n    this.setState({\n      orderOpen: !this.state.orderOpen,\n    }, ()=>console.log('orderOpen after set state: ' + this.state.orderOpen)\n    )\n  }\n  \n  togglePaymentForm = () => {\n    this.setState({\n      paymentOpen: !this.state.paymentOpen,\n    }, ()=>console.log('paymentOpen after set state: ' + this.state.paymentOpen)\n    )\n  }\n\n  checkout = () => {\n    alert('Your order has been completed!')\n    // square api call needs to be ported here\n  }\n  \n  componentDidMount(){\n    this.getDishes()\n  }\n  \n  render(){\n    \n    return (\n      <div className=\"App\">\n        <Payment\n          currentOrderTotal={this.state.currentOrderTotal}\n          paymentOpen={this.state.paymentOpen}\n          togglePaymentForm={this.togglePaymentForm}\n          checkout={this.checkout}\n        />\n        <Nav \n          toggleRegisterForm={this.toggleRegisterForm}\n          registerOpen={this.state.registerOpen}\n          toggleLoginForm={this.toggleLoginForm}\n          loginOpen={this.state.loginOpen}\n          toggleOrderForm={this.toggleOrderForm}\n          toggleLogo={this.toggleLogo}\n          toggleMenu={this.toggleMenu}\n          orderOpen={this.state.orderOpen}\n          logoutUser={this.logoutUser}\n          userLoggedIn={this.state.userLoggedIn}\n        />\n        <Logo \n          logoOpen={this.state.logoOpen}\n        />\n        <Register \n          register={this.register}\n          registerOpen={this.state.registerOpen}\n          toggleRegisterForm={this.toggleRegisterForm}\n          toggleMenu={this.toggleMenu}\n        />\n        <Login \n          loginUser={this.loginUser}\n          loginOpen={this.state.loginOpen}\n          toggleMenu={this.toggleMenu}\n          toggleRegisterForm={this.toggleRegisterForm}\n\n        />\n\n        <div className=\"bottom-container\">\n          <Menu \n            dishes = {this.state.dishes}\n            currentOrderId = {this.state.currentOrderId}\n            addDishToOrder = {this.addDishToOrder}\n            menuOpen={this.state.menuOpen}\n          />\n          <Order \n            username={this.state.username}\n            orderOpen={this.state.orderOpen}\n            orderedDishes={this.state.orderedDishes}\n            orderedDishQty={this.state.orderedDishQty}\n            currentOrderId={this.state.currentOrderId}\n            orders={this.state.orders}\n            currentOrderTotal={this.state.currentOrderTotal}\n            deletedOrderedDish={this.deleteOrderedDish}\n            togglePaymentForm={this.togglePaymentForm}\n          />\n          <OrderSpacer\n            orderOpen={this.state.orderOpen}\n          /> \n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}